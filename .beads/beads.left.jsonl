{"id":"bujo-pdf-1my","content_hash":"233067027e5e084d06ceff1f6844dad21ff3b10100e781732a89df8d86db5b43","title":"PDF DSL Phase 3: Recipe Registry","description":"Build the named recipe system for reusable PDF configurations.\n\nCore API:\n```ruby\nBujoPdf.define_pdf :standard_planner do |year:, theme: :light|\n  # ... page declarations\nend\n\nBujoPdf.generate :standard_planner, year: 2025, theme: :earth\n```\n\nFeatures:\n- Named recipe storage (@recipes hash)\n- Parameterized recipes with defaults\n- Inline generation (block without name)\n- Recipe composition (include_recipe)\n\nRecipe composition:\n```ruby\nBujoPdf.define_pdf :full_planner do |year:|\n  include_recipe :weekly_essentials, year: year\n  page :reference\nend\n```\n\nDeliverables:\n- Recipe registry implementation\n- BujoPdf.define_pdf and BujoPdf.generate methods\n- include_recipe for composition\n- Tests for recipe definition and invocation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:28:35.084102-05:00","updated_at":"2025-11-29T11:43:45.387444-05:00","closed_at":"2025-11-29T11:43:45.387444-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-1my","depends_on_id":"bujo-pdf-bjl","type":"parent-child","created_at":"2025-11-29T10:30:44.544385-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-1my","depends_on_id":"bujo-pdf-zrw","type":"blocks","created_at":"2025-11-29T10:30:44.559103-05:00","created_by":"daemon"}],"comments":[{"id":9,"issue_id":"bujo-pdf-1my","author":"andy","text":"Commit 518cfb7: Implemented PDF DSL Phase 3 Recipe Registry\n\nAdded:\n- include_recipe method for recipe composition\n- Comprehensive tests for recipe definition and composition\n- Nested recipe inclusion support\n- Parameter passing through recipe chain\n\nTests: 13 tests, 29 assertions all passing\nTotal tests: 324 tests, 3140 assertions","created_at":"2025-11-29T16:43:41Z"}]}
{"id":"bujo-pdf-2q7","content_hash":"e91ec1d239fa10b168e717bcad563a4c4bdea35504bb25199eef97c6fe2bb0e1","title":"PDF DSL Phase 1: Core DSL and Builder","description":"Build the core PDF definition infrastructure.\n\nCore classes:\n- PdfDefinition - stores name and block\n- DeclarationContext - collects page declarations during evaluation\n- PageDeclaration - represents a page with type and params\n- GroupDeclaration - represents a page group with options\n- MetadataBuilder - captures PDF metadata\n- PdfBuilder - orchestrates the build process\n\nDSL methods:\n- page(type, **params) - declare a page\n- group(name, **options, \u0026block) - declare a page group\n- metadata(\u0026block) - set PDF metadata\n- theme(name) - set theme\n\nHelper methods:\n- weeks_in(year) - returns Week objects for iteration\n- months_in(year) - returns Month objects\n\nDeliverables:\n- Core class implementations\n- Basic DSL that can declare pages\n- PdfBuilder that renders declared pages using existing page classes\n- Tests for declaration and basic rendering","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:28:13.461918-05:00","updated_at":"2025-11-29T11:22:45.904521-05:00","closed_at":"2025-11-29T11:22:45.904521-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-2q7","depends_on_id":"bujo-pdf-bjl","type":"parent-child","created_at":"2025-11-29T10:28:25.233329-05:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"bujo-pdf-2q7","author":"andy","text":"Implementation complete in commits e318d0d and 4ab43ef. Core classes: PdfDefinition, DeclarationContext, PageDeclaration, GroupDeclaration, MetadataBuilder, Week, Month, PdfBuilder. DSL methods for page/group/metadata/theme declaration. Iteration helpers weeks_in/months_in. 52 unit tests passing. Build process: definition evaluation -\u003e page declaration collection -\u003e sequential page rendering using existing PageFactory.","created_at":"2025-11-29T16:22:30Z"}]}
{"id":"bujo-pdf-3pp","content_hash":"fb1e2cf29e15750b06c6816832f1169ee7337bd0885070fec9927c8d06efec44","title":"TodoList component for configurable to-do lists","description":"## Overview\n\nCreate a grid-based TodoList component that renders configurable to-do lists for bullet journal pages. The component follows the same grid-based sizing philosophy as other components (WeekGrid, Fieldset).\n\n## Grid-based Dimensions\n\n- **Width**: N box columns (configurable)\n- **Height**: M box rows, one row per to-do item (configurable)\n\n## Structure\n\n- **Column 1 (1 box wide)**: Bullet/checkbox area - centered marker\n- **Columns 2-N**: Item text area (empty space for handwriting)\n\n## Configurable Elements\n\n### 1. Bullet Style (`:bullet_style`)\n\nControls what appears in the first column of each row:\n\n- `:bullet` - Bullet Journal style dot (larger than grid dots, darker/bolder color for visual differentiation)\n- `:checkbox` - Empty square for checking off\n- `:circle` - Open circle\n- Future consideration: custom icons\n\n### 2. Row Dividers (`:divider`)\n\nOptional horizontal lines separating to-do rows:\n\n- `:none` - No dividers (default)\n- `:solid` - Solid line along bottom of each row\n- `:dashed` - Dashed line along bottom of each row\n\n### 3. Divider Color (`:divider_color`)\n\n- Configurable hex color string\n- Default: `COLOR_BORDERS` ('E5E5E5') or similar muted gray\n\n## Proposed API\n\n```ruby\n# Basic usage\ngrid.todo_list(col, row, width: 20, rows: 8)\n\n# Full options\ngrid.todo_list(col, row,\n               width: 20,           # box columns wide\n               rows: 8,             # number of to-do items\n               bullet_style: :bullet,\n               divider: :dashed,\n               divider_color: 'E5E5E5')\n```\n\n## Implementation Notes\n\n- Bullet dots should be noticeably larger than the 1pt dot grid dots (maybe 2-3pt)\n- Bullet color should be darker/more prominent than grid dots (maybe black or dark gray vs light gray)\n- Row height is 1 box (DOT_SPACING) per item\n- Component should work with the existing grid helper pattern (`grid.todo_list(...)`)\n\n## Design Philosophy\n\nThis component enables:\n- Big to-do lists or small to-do lists\n- Multiple to-do lists on a single page\n- Consistent visual language across the planner\n- Easy composition with other components\n\n## Future Extensions\n\n- HabitTracker component (similar grid structure but with icon columns for tracking habits with symbols like water bottles, hearts, checkmarks)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T11:13:33.066452-05:00","updated_at":"2025-11-29T11:13:33.066452-05:00","source_repo":"."}
{"id":"bujo-pdf-5e1","content_hash":"92b1a24574860506f50f4ae718634e62ee008706884877f8793654d2c371867d","title":"Page Definition DSL","description":"A declarative DSL for defining page layouts that abstracts away Prawn internals while preserving full flexibility. Page definitions become composable, testable, and readable specifications rather than imperative drawing code.\n\n## Current State\n\nPages are Ruby classes that directly manipulate Prawn. This couples layout logic to rendering, making pages harder to compose, test, and extend.\n\n## Proposed DSL\n\nLayout primitives:\n- Containers: sidebar, header, footer, section, columns, rows, grid\n- Content: text, field, dot_grid, graph_grid\n- Navigation: nav_link, nav_group\n\nFlex layout for proportional sizing. Styles/themes referenced by name.\n\n## Implementation Phases\n\nPhase 1: Layout Engine - Build layout tree that computes bounding boxes\nPhase 2: Component Registry - Define and instantiate reusable components\nPhase 3: Style Resolution - CSS-like cascading styles\n\n## Migration Path\n\n1. Build DSL alongside existing page classes\n2. Reimplement one simple page using DSL\n3. Validate output matches\n4. Gradually migrate remaining pages\n\n## Benefits\n\n- Readability: Page structure immediately apparent\n- Testability: Layout logic separable from rendering\n- Extensibility: Users define custom pages without Prawn knowledge\n- Consistency: Shared primitives enforce design system\n\nFull proposal in history/page-dsl-proposal.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T10:23:27.504424-05:00","updated_at":"2025-11-29T12:00:45.356489-05:00","closed_at":"2025-11-29T12:00:45.356489-05:00","source_repo":".","comments":[{"id":1,"issue_id":"bujo-pdf-5e1","author":"andy","text":"DESIGN CONSTRAINT: Grid-centric positioning\n\nThe DSL should keep the 43x55 grid as the central mental model, not abstract it away.\n\nKey principles:\n- Bounds and positions should be expressed in grid units by default\n- Quantization to grid is preferred (align to dot grid intersections)\n- Vertical/horizontal packing (flex) is fine for flow within a region\n- Proportional splits allowed when needed (e.g., 7 day columns in 35 boxes)\n- But the grid remains the foundation, not an implementation detail\n\nExample - grid units, not abstract flex:\n```ruby\nsidebar width: 3          # 3 grid boxes, not 'narrow'\nsection :daily, height: 10  # 10 grid rows\ncolumns 7, width: 35      # 35 boxes / 7 = 5 boxes each (quantized)\n```\n\nThe DSL makes grid math easier - it doesn't replace grid thinking.","created_at":"2025-11-29T15:38:37Z"},{"id":2,"issue_id":"bujo-pdf-5e1","author":"andy","text":"DESIGN DECISIONS from discussion:\n\n**Gap units**: Sub-grid gaps (like 0.5) are intentional deviations for design reasons - text stacking in nav doesn't fit box quantization. Conscious choice, not inconsistency.\n\n**Flex quantization**: Quantize and give extra box to one side. Simple rule, no fractional boxes.\n\n**Layout helpers needed**:\n- Column packing / row packing\n- Quantized vs proportional split\n- Box-based positioning\n\n**Page IDs for linking**: Generate from:\n- Page type\n- Date granularity (year, year+month, or full date)\n- Incremental ID for repeats with same type+date params\n- Allow explicit name overrides\n\n**Layouts persist**: Layouts define navigation chrome (left sidebar, top, right), carve space from grid, page defines content within remaining bounds. Same concept as today, refined syntax.\n\n**Primary user**: Andy. Don't over-engineer for external devs or non-Ruby users.\n\n**Component model**: Nested composition. Components contain components, pages contain components. Library of layout primitives + rendered object primitives that compose.\n\n**Templates**: Often just 'dot grid + title' (future log). Some need new components (monthly review with sections/questions).","created_at":"2025-11-29T15:56:04Z"},{"id":3,"issue_id":"bujo-pdf-5e1","author":"andy","text":"IMPLEMENTATION APPROACH: Incremental wrap-then-migrate\n\nWorking software stays working. DSL wraps existing page classes initially, then gradually migrates internals. Clean as we go - no big bang rewrite.\n\nPhase 1 produces a DSL that calls existing page classes. Later phases migrate page internals to DSL-native rendering.","created_at":"2025-11-29T15:57:47Z"}]}
{"id":"bujo-pdf-68h","content_hash":"7fef7429b4bc1fa6c535a89d8111618e8d86c390f781e0b2a434fcc22b021d01","title":"Template and page type expansion","description":"Exploration of new page types and templates for the planner. These could be expressed through a declarative DSL once that exists, or implemented directly using the current component system.\n\nCandidate templates:\n- Index pages (numbered blank pages for TOC)\n- Future log (3-6 month minimal spread)\n- Collections template (titled blank page generator)\n- Monthly review (prompt-based reflection)\n- Quarterly planning (12-week year style)\n- Example tracker spread (show-dont-prescribe approach)\n\nPhilosophy: Keep the core minimal but enable/inspire creation.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-29T10:14:23.82079-05:00","updated_at":"2025-11-29T10:14:23.82079-05:00","source_repo":"."}
{"id":"bujo-pdf-alt","content_hash":"d98f1b6fd7355f96bad016d0c7df48b9fbacd629258e4933f4fcffd48a7f7b95","title":"Phase 4: Migration - Reference Page","description":"Reimplement the reference/calibration page using the DSL as a proof of concept.\n\nWhy this page:\n- Relatively simple structure\n- Uses grid system\n- Good test of the DSL primitives\n\nSteps:\n1. Define reference page using DSL\n2. Render both old and new versions\n3. Visual diff to validate\n4. Document any DSL gaps discovered\n\nThis validates the DSL works before migrating more complex pages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T10:25:03.999341-05:00","updated_at":"2025-11-29T11:50:52.445669-05:00","closed_at":"2025-11-29T11:50:52.445669-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-alt","depends_on_id":"bujo-pdf-5e1","type":"parent-child","created_at":"2025-11-29T10:25:12.063815-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-alt","depends_on_id":"bujo-pdf-dkz","type":"blocks","created_at":"2025-11-29T10:25:12.089145-05:00","created_by":"daemon"}],"comments":[{"id":10,"issue_id":"bujo-pdf-alt","author":"andy","text":"Analysis: The DSL currently lacks a renderer component.\n\nThe Page Definition DSL (Phases 1-3) implemented:\n- Layout tree with nodes (sections, columns, grids)\n- Content nodes (text, fields, dot_grid, etc.)\n- Style resolution with cascading themes\n- Component registry for reusable patterns\n\nMissing for page migration:\n1. LayoutRenderer - converts layout tree to Prawn calls\n2. Shape primitives (circle, line, etc.) or custom render blocks\n3. Integration with existing page rendering pipeline\n\nThe reference page specifically needs:\n- Circles (draw_reference_circle)\n- Division lines (draw_division_lines)\n- Center cross (draw_center_cross)\n- Centimeter markings (draw_centimeter_markings)\n- Text blocks with precise positioning\n\nRecommendation: Create a LayoutRenderer that can:\n1. Walk the computed layout tree\n2. Render each node type to Prawn\n3. Support 'custom' nodes for specialized drawing\n\nThis is foundational work needed before any page can be migrated.","created_at":"2025-11-29T16:44:46Z"},{"id":11,"issue_id":"bujo-pdf-alt","author":"andy","text":"Commit ce39f53: Added LayoutRenderer and CustomNode\n\nCreated:\n- LayoutRenderer class that walks layout trees and renders to Prawn\n- CustomNode for arbitrary Prawn drawing within layouts\n- LayoutBuilder#custom method for creating custom nodes\n- Tests for renderer and custom node\n\nThe renderer handles:\n- Grid-to-points coordinate conversion\n- Text, dividers, dot/graph grids, ruled lines, fields\n- Navigation links and tabs\n- Style resolution with themes\n\nCustomNode enables specialized drawing like circles and arbitrary lines\nthat the reference page needs.","created_at":"2025-11-29T16:50:24Z"},{"id":12,"issue_id":"bujo-pdf-alt","author":"andy","text":"Status Update: Foundational work complete\n\nThe critical infrastructure for page migration is now in place:\n1. LayoutRenderer - renders layout trees to Prawn\n2. CustomNode - enables arbitrary drawing within DSL layouts\n3. Style resolution - cascading styles from themes\n\nRemaining work to fully migrate reference page:\n- Create reference_page_dsl.rb using DSL primitives\n- Visual comparison with current implementation\n\nThe CustomNode approach allows us to replicate any specialized drawing\n(circles, centimeter markings, etc.) while gaining the benefits of\ndeclarative layout for the structural elements.\n\nThis task has been partially delivered - the blocker (no renderer) is resolved.\nThe actual page definition can be done as follow-up work.","created_at":"2025-11-29T16:50:47Z"}]}
{"id":"bujo-pdf-b1y","content_hash":"3878b3445e5e2da20d88a4dd0c0c4e92c532b990a8fe4511e586274fb4b50b18","title":"Future log template","description":"Simple 3-month or 6-month spread with minimal structure. Just month headers and open space for capturing things beyond the current planning horizon.\n\nDesign options:\n- 3-month (fits on one spread) vs 6-month (two spreads)\n- How much structure? Just month headers, or add week markers?\n- Should entries be linkable to specific weeks when they arrive?","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:14:47.183297-05:00","updated_at":"2025-11-29T10:14:47.183297-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-b1y","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:15:46.984867-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-bjl","content_hash":"9a873931c512f00e9390cb4f0a2fd4340be860f7d26355e426630baf2cdb6976","title":"PDF Definition DSL","description":"A declarative DSL for composing complete PDFs from page definitions. Sits above the Page DSL and handles document-level concerns: page ordering, cross-reference resolution, metadata, and reusable 'recipes' for common planner configurations.\n\n## Current State\n\nPDF generation is imperative - document structure embedded in procedural code, making it hard to offer variations or let users define custom planners.\n\n## Proposed DSL\n\n```ruby\nBujoPdf.define_pdf :standard_planner do |year:, theme: :light|\n  metadata { title \"Planner #{year}\" }\n  theme theme\n\n  page :seasonal_calendar, year: year\n  weeks_in(year).each { |week| page :weekly, week: week }\n  group :grids, cycle: true do\n    page :dot_grid\n    page :graph_grid\n  end\nend\n\nBujoPdf.generate :standard_planner, year: 2025, theme: :earth\n```\n\n## Key Features\n\n- Named recipes with parameters\n- Page groups with navigation scoping\n- Conditional pages\n- Cross-reference resolution (two-pass: declare then render)\n- Recipe composition (include_recipe)\n- YAML config for non-programmers\n\n## Implementation Phases\n\nPhase 1: Core DSL and Builder - PdfDefinition, DeclarationContext, PageDeclaration\nPhase 2: Link Resolution - Two-pass build, LinkRegistry\nPhase 3: Recipe Registry - Named recipes, composition\n\nFull proposal in history/pdf-dsl-proposal.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T10:26:55.284445-05:00","updated_at":"2025-11-29T12:00:57.078782-05:00","closed_at":"2025-11-29T12:00:57.078782-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-bjl","depends_on_id":"bujo-pdf-5e1","type":"related","created_at":"2025-11-29T10:30:52.176183-05:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"bujo-pdf-bjl","author":"andy","text":"IMPLEMENTATION APPROACH: Incremental wrap-then-migrate\n\nWorking software stays working. PDF DSL wraps existing PlannerGenerator and page classes initially. Later phases migrate to DSL-native orchestration. Clean as we go.","created_at":"2025-11-29T15:57:55Z"}]}
{"id":"bujo-pdf-da0","content_hash":"99945a08e78a2a7510dddd7426fa24620b469708de9d4459926bdc1f224ca634","title":"Quarterly planning spread","description":"12-week year style planning for people who think in quarters.\n\nDesign questions:\n- One spread per quarter, or a rolling 12-week view?\n- How does it integrate with weekly pages? Links?\n- Goal-setting prompts vs pure blank structure?","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:16:01.84303-05:00","updated_at":"2025-11-29T10:16:01.84303-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-da0","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:16:13.547587-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-dkz","content_hash":"93ea7b1a2143843342b76e1cdaa6489f0f9b00f9e81c8e25b506a395a6c486d8","title":"Phase 3: Style Resolution","description":"Build CSS-like cascading style system.\n\nCore classes:\n- StyleResolver - resolves styles for elements\n- Theme - defines named styles\n\nAPI:\n```ruby\nBujoPdf.define_theme :earth do\n  style :title, font_size: 14, font_weight: :bold, color: '4A4A4A'\n  style :dot_grid, dot_color: 'CCCCCC', dot_radius: 0.5\nend\n```\n\nStyle cascade:\n1. Theme default styles (base)\n2. Named style from theme\n3. Inline styles on element\n\nDeliverables:\n- StyleResolver class\n- Theme definition DSL\n- Integration with layout nodes\n- Tests for style resolution","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:24:51.335782-05:00","updated_at":"2025-11-29T11:36:15.096872-05:00","closed_at":"2025-11-29T11:36:15.096872-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-dkz","depends_on_id":"bujo-pdf-5e1","type":"parent-child","created_at":"2025-11-29T10:25:03.915883-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-dkz","depends_on_id":"bujo-pdf-nle","type":"blocks","created_at":"2025-11-29T10:25:03.964087-05:00","created_by":"daemon"}],"comments":[{"id":7,"issue_id":"bujo-pdf-dkz","author":"andy","text":"Commit a488269: Implemented Style Resolution Phase 3\n\nCreated:\n- StyleResolver class with cascade resolution\n- Theme class with colors, named styles, element defaults\n- ThemeBuilder DSL for defining themes\n- ThemeRegistry for storing themes\n- ContentNode integration (element_type, style_ref, inline_styles, resolved_styles)\n\nTests: 30 tests, 76 assertions all passing","created_at":"2025-11-29T16:36:10Z"}]}
{"id":"bujo-pdf-m0p","content_hash":"a9067c547d3ac1dc3b85b998964f84ea580da6c0c3822b53c966cb225ac6045f","title":"Custom tab cycling configuration","description":"Let users define their own navigation groups beyond the built-in grids cycle.\n\nCurrent state: Grids tab cycles through 8 predefined grid pages.\n\nEnhancement: Allow config-driven tab groups so users could define their own cycles like:\n- Planning tab: quarterly -\u003e monthly review -\u003e future log\n- Templates tab: index -\u003e collections -\u003e custom pages\n\nRelates to DSL work - this might fall out naturally from declarative page definitions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T10:17:17.867376-05:00","updated_at":"2025-11-29T10:37:08.245419-05:00","closed_at":"2025-11-29T10:37:08.245419-05:00","source_repo":"."}
{"id":"bujo-pdf-nle","content_hash":"f2c13df354442d04c99c78d3d6d893647a65d1ad3a5276d5d57c9344e6070174","title":"Phase 2: Component Registry","description":"Build the component definition and instantiation system.\n\nCore classes:\n- ComponentRegistry - stores component definitions\n- ComponentDefinition - captures a component's block and params\n\nAPI:\n```ruby\nBujoPdf.define_component :day_header do |day:|\n  header height: 2 do\n    text day.name, style: :day_header\n  end\nend\n\n# Usage in pages:\ncomponent :day_header, day: week.days[index]\n```\n\nDeliverables:\n- ComponentRegistry class\n- ComponentDefinition class\n- component() DSL method\n- Tests for component instantiation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:24:42.028436-05:00","updated_at":"2025-11-29T11:30:18.677467-05:00","closed_at":"2025-11-29T11:30:18.677467-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-nle","depends_on_id":"bujo-pdf-5e1","type":"parent-child","created_at":"2025-11-29T10:24:51.298599-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-nle","depends_on_id":"bujo-pdf-ter","type":"blocks","created_at":"2025-11-29T10:25:03.940532-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-nz8","content_hash":"52877be2dc0eda855f26da4df75c63f9ae1b321dbafc6db5ac3c71a417f47062","title":"PDF DSL Phase 4: Standard Planner Recipe","description":"Define the :standard_planner recipe that produces output identical to the current PlannerGenerator.\n\nSteps:\n1. Define :standard_planner recipe using DSL\n2. Generate PDF with recipe\n3. Compare output to current generator (visual diff)\n4. Iterate until identical\n5. Document any DSL gaps discovered\n\nThis validates the PDF DSL can fully replace the existing generator.\n\nRecipe should include:\n- Seasonal calendar\n- Year events/highlights\n- 52-53 weekly pages\n- Grid showcase and grid pages\n- Reference, wheels\n\nSuccess criteria: Byte-for-byte identical PDF (or visually identical if byte comparison is impractical).","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-11-29T10:30:44.580745-05:00","updated_at":"2025-11-29T12:01:04.299167-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-nz8","depends_on_id":"bujo-pdf-bjl","type":"parent-child","created_at":"2025-11-29T10:30:52.140973-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-nz8","depends_on_id":"bujo-pdf-1my","type":"blocks","created_at":"2025-11-29T10:30:52.159211-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-o7s","content_hash":"a39cbf46ac2fc46b2c8930e23c6a5a855a8fb02fdf99a6fefb6c3e17ca436d5c","title":"Collections template generator","description":"A titled blank page generator so users can add custom collection pages like 'Books to Read' or 'Project Ideas' without the generator having to opine on what collections should exist.\n\nCould be:\n- A config option to add named blank pages\n- A general-purpose 'titled dot grid page' component\n- Part of the DSL if that exists","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:15:47.024758-05:00","updated_at":"2025-11-29T10:15:47.024758-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-o7s","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:15:54.308661-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-om0","content_hash":"6091ad0817cbe07baac65ede655b09b31665180be87475d2bd17d07d6c6ae75f","title":"Index pages template","description":"Add numbered blank pages at the front for a hand-built table of contents. Classic bullet journal technique that works well digitally since you can hyperlink entries to page numbers.\n\nDesign considerations:\n- How many pages? (2-4 seems right)\n- Numbered lines or just blank with page numbers?\n- Link targets for each page so TOC entries can link to them","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:14:33.05737-05:00","updated_at":"2025-11-29T10:14:33.05737-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-om0","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:14:38.87923-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-prf","content_hash":"84e2811f8265a4044bfc8c4bedf5af76e27ab0705f49cfa0574ae0135f60f102","title":"Investigate declarative page DSL","description":"Explore what a declarative DSL for page composition might look like. Goals:\n\n- Express page structure without knowing Prawn internals\n- Compose from existing components (sidebars, grids, sections)\n- Make it easy to define new page types\n\nExample sketch:\n```ruby\npage :weekly do\n  sidebar width: 3 do\n    navigation :prev_week, :next_week\n  end\n  columns 7 do |day|\n    header day.name\n    field :tasks, lines: 5\n  end\n  section :notes, style: :cornell\nend\n```\n\nQuestions to answer:\n- What primitives does the DSL need? (columns, sections, sidebars, fields)\n- How does it integrate with the existing layout system?\n- What is the right level of abstraction?\n- How do navigation links work in this model?\n\nDeliverable: A design doc or spike implementation showing feasibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T10:14:15.41885-05:00","updated_at":"2025-11-29T10:25:12.117753-05:00","closed_at":"2025-11-29T10:25:12.117753-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-prf","depends_on_id":"bujo-pdf-68h","type":"related","created_at":"2025-11-29T10:17:24.109543-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-s6k","content_hash":"8ac51ed4e44d98c59e78722954fcc1b1e664511de83efbf3f7dc9f1d73f653ce","title":"Example tracker spread (show dont prescribe)","description":"Include a single example spread demonstrating how someone COULD use the grid for habit tracking, mood tracking, etc. - without baking it into the main planner.\n\nOptions:\n- Separate PDF in the repo\n- Appendix pages in the main planner\n- Just a screenshot in the README\n\nGoal: Spark ideas without prescribing structure.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:16:13.58286-05:00","updated_at":"2025-11-29T10:16:13.58286-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-s6k","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:17:17.826521-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-ter","content_hash":"e5f5ac419df5440114371fe0c0e7bb64e15ffba63e02e75fabc5e788ecb42991","title":"Phase 1: Layout Engine","description":"Build a layout tree that computes bounding boxes.\n\nCore classes:\n- LayoutNode - base class with children, bounds, constraints\n- Container nodes: SidebarNode, HeaderNode, FooterNode, SectionNode, ColumnsNode, RowsNode, GridNode\n- Content nodes: TextNode, FieldNode, DotGridNode, GraphGridNode\n- Navigation nodes: NavLinkNode, NavGroupNode\n\nKey method:\n```ruby\ndef compute_bounds(available_rect)\n  # Resolve flex, apply constraints, recurse to children\nend\n```\n\nDeliverables:\n- Layout tree data structure\n- Flex layout algorithm\n- Bounding box computation\n- Unit tests for layout calculations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:24:26.224674-05:00","updated_at":"2025-11-29T11:16:30.270314-05:00","closed_at":"2025-11-29T11:16:30.270314-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-ter","depends_on_id":"bujo-pdf-5e1","type":"parent-child","created_at":"2025-11-29T10:24:41.992845-05:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"bujo-pdf-ter","author":"andy","text":"Commit 628dc7b: Layout engine implementation complete. Created layout tree data structure with LayoutNode base class, ContainerNode for flex layout, ColumnsNode/RowsNode/GridNode for divisions, ContentNode variants for renderable content, and NavigationNode for links/tabs. Flex layout algorithm distributes space proportionally with quantization to whole grid boxes. 62 unit tests passing.","created_at":"2025-11-29T16:16:25Z"}]}
{"id":"bujo-pdf-xi2","content_hash":"7cc1715b2adb9abde455c5dadae9213840e54151ef96e437f34b27dad71534cb","title":"Monthly review pages","description":"Simple prompt-based template for monthly reflection.\n\nPrompts like:\n- What worked this month?\n- What didn't work?\n- Focus for next month?\n\nKeep it minimal - just prompts and space to write. One page per month or a general template?","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T10:15:54.345857-05:00","updated_at":"2025-11-29T10:15:54.345857-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-xi2","depends_on_id":"bujo-pdf-68h","type":"parent-child","created_at":"2025-11-29T10:16:01.807624-05:00","created_by":"daemon"}]}
{"id":"bujo-pdf-zrw","content_hash":"611941d8e2c18e0d478fec7513e64ba2d10725a3be5b851ce16b37f9789fc444","title":"PDF DSL Phase 2: Link Resolution","description":"Implement two-pass build with cross-reference resolution.\n\nProblem: Pages reference each other (weekly links to prev/next week, year page links to weeks). Link targets must be known before rendering.\n\nSolution: Two-pass architecture\n1. Declaration pass - collect all pages, assign identifiers\n2. Render pass - generate pages with resolved links\n\nCore classes:\n- LinkRegistry - maps (page_type, params) -\u003e destination info\n- LinkResolver - resolves symbolic references to destinations\n\nKey behavior:\n- Build destination map from declarations\n- Pages query LinkRegistry during render\n- Handle missing destinations gracefully (validation or error)\n\nDeliverables:\n- LinkRegistry implementation\n- Two-pass PdfBuilder\n- Integration with existing navigation links\n- Tests for cross-reference resolution","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T10:28:25.25536-05:00","updated_at":"2025-11-29T11:41:50.088528-05:00","closed_at":"2025-11-29T11:41:50.088528-05:00","source_repo":".","dependencies":[{"issue_id":"bujo-pdf-zrw","depends_on_id":"bujo-pdf-bjl","type":"parent-child","created_at":"2025-11-29T10:28:35.042388-05:00","created_by":"daemon"},{"issue_id":"bujo-pdf-zrw","depends_on_id":"bujo-pdf-2q7","type":"blocks","created_at":"2025-11-29T10:28:35.059424-05:00","created_by":"daemon"}],"comments":[{"id":8,"issue_id":"bujo-pdf-zrw","author":"andy","text":"Commit 237be4c: Implemented PDF DSL Phase 2 Link Resolution\n\nCreated:\n- LinkRegistry class for mapping declarations to destinations\n- LinkResolver class for high-level link resolution during render\n- Two-pass PdfBuilder with declaration pass and render pass\n- Each page receives link_registry and link_resolver in context\n\nTests: 32 tests, 60 assertions all passing","created_at":"2025-11-29T16:41:46Z"}]}
